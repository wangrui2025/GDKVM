<!DOCTYPE html>
<html class="lang-en"> <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GDKVM | Reproduction Guide</title>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/ini.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/yaml.min.js"></script>

  <style>
    /* --- 1. Global Settings --- */
    html { font-size: 14px; scroll-behavior: smooth; }
    body { font-family: 'Noto Sans', 'Noto Sans SC', sans-serif; background-color: #ffffff; color: #4a4a4a; min-height: 100vh; display: flex; flex-direction: column; }
    a { color: #3273dc; transition: color 0.2s; text-decoration: none; }
    a:hover { color: #1a237e; text-decoration: underline; }

    /* --- 2. Typography --- */
    .publication-title { font-family: 'Google Sans', sans-serif; font-size: 2.2rem !important; }
    .subtitle.is-4 { font-size: 1.3rem !important; line-height: 1.5; margin-top: 0.5rem; }
    
    .section-title { font-size: 1.5rem !important; margin-top: 2.5rem; margin-bottom: 1.5rem; font-weight: 600; color: #363636; border-bottom: 2px solid #f5f5f5; padding-bottom: 0.5rem; }
    .subsection-title { font-size: 1.2rem !important; margin-top: 1.8rem; margin-bottom: 0.8rem; font-weight: 600; color: #4a4a4a; }
    
    .content { font-size: 1rem; }
    
    /* --- 3. Code Block Styles --- */
    .code-container { position: relative; margin-bottom: 1rem; }
    
    pre { background-color: #f5f5f5; padding: 1rem; border-radius: 4px; overflow-x: auto; }
    
    /* Inline Code */
    :not(pre) > code { 
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace; 
      background-color: #f3f6fc; 
      padding: 0.15rem 0.35rem; 
      border-radius: 4px;
      color: #0969da; 
      font-size: 0.9em;
      border: 1px solid rgba(175, 184, 193, 0.2);
    }

    pre code.hljs { padding: 0; background-color: transparent; font-size: 0.95em; font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace; }

    .copy-btn {
      position: absolute; top: 0.5rem; right: 0.5rem;
      opacity: 0.7; transition: opacity 0.2s;
      border: 1px solid #dbdbdb; cursor: pointer; z-index: 10;
    }
    .copy-btn:hover { opacity: 1; }

    /* --- 4. Special Boxes (Merged) --- */
    .advanced-box {
      background-color: #fffbeb;
      border-left: 4px solid #ffdd57;
      border-radius: 4px;
      padding: 1.2rem;
      margin: 1.5rem 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .advanced-title {
      font-weight: bold; color: #947600; margin-bottom: 0.8rem;
      display: flex; align-items: center; font-size: 1.05rem;
    }
    .advanced-title i { margin-right: 0.5rem; }

    details.compatibility-box {
      background-color: #fffdf5; border-left: 4px solid #ffdd57;
      border-radius: 4px; margin: 1.5rem 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05); overflow: hidden;
    }
    
    summary.compatibility-header {
      padding: 1rem 1.2rem; font-weight: bold; color: #856404; cursor: pointer;
      list-style: none; display: flex; align-items: center; justify-content: space-between;
      outline: none; background-color: rgba(255, 221, 87, 0.15);
    }
    summary.compatibility-header:hover { background-color: rgba(255, 221, 87, 0.25); }
    summary.compatibility-header::-webkit-details-marker { display: none; }
    
    .compatibility-content { padding: 1.2rem; border-top: 1px solid rgba(255, 221, 87, 0.3); }

    /* --- 5. Data Cards --- */
    .compact-card {
      background: #fff; border: 1px solid #ededed;
      border-radius: 6px; padding: 1rem 1.2rem; margin-bottom: 1.2rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.03); font-size: 0.95rem;
    }
    
    .link-tag {
      background-color: #f5f5f5; padding: 0.1rem 0.5rem; border-radius: 3px;
      font-size: 0.85rem; color: #3273dc; display: inline-flex; align-items: center;
      transition: background-color 0.2s; border: 1px solid transparent;
    }
    .link-tag:hover { background-color: #e8f0fe; border-color: #b5d0ff; text-decoration: none; }
    .link-tag i { margin-left: 0.3rem; font-size: 0.8em; }

    .link-subtle {
      color: #999; text-decoration: none; margin-left: 0.4rem;
      transition: color 0.2s; border-bottom: 1px dotted #ccc;
    }
    .link-subtle:hover { color: #3273dc; border-bottom-color: #3273dc; }

    /* --- 6. Layout --- */
    .hero { background-color: #f8f9fa; margin-bottom: 2rem; border-bottom: 1px solid #eaeaea; }
    .section { flex: 1; }

    /* --- 7. Language Switcher & Logic --- */
    .lang-btn {
        position: fixed; top: 1.5rem; right: 1.5rem; z-index: 999;
        background: #cccccc; border: 1px solid #dbdbdb;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15); border-radius: 50px;
        padding: 0.5rem 1.2rem; font-weight: bold; cursor: pointer;
        transition: all 0.3s; display: flex; align-items: center; gap: 8px;
        font-family: 'Google Sans', sans-serif;
    }
    .lang-btn:hover { background: #f5f5f5; color: #3273dc; }
    
    @media screen and (max-width: 768px) {
        .lang-btn { top: 1rem; right: 1rem; padding: 0.4rem 1rem; font-size: 0.8rem; }
    }

    /* Core Toggle Logic */
    [lang] { display: none; }
    
    /* English Mode */
    html.lang-en [lang="en"] { display: inline; }
    html.lang-en div[lang="en"], html.lang-en p[lang="en"], html.lang-en span[lang="en"] { display: block; }
    html.lang-en span[lang="en"] { display: inline; }
    
    /* Chinese Mode */
    html.lang-zh [lang="zh"] { display: inline; }
    html.lang-zh div[lang="zh"], html.lang-zh p[lang="zh"], html.lang-zh span[lang="zh"] { display: block; }
    html.lang-zh span[lang="zh"] { display: inline; }

    /* Code Block Specific Toggle Logic */
    html.lang-en pre[lang="en"] { display: block; }
    html.lang-zh pre[lang="zh"] { display: block; }

    /* Animation */
    .fade-in { animation: fadeIn 0.4s ease-in-out; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

  </style>

  <script>
    // Init Language from LocalStorage
    let savedLang = 'en';
    try {
      savedLang = localStorage.getItem('lang') || 'en';
    } catch (e) {
      console.warn('LocalStorage access denied:', e);
    }
    document.documentElement.className = 'lang-' + savedLang;
  </script>
</head>
<body>

<button id="lang-toggle" class="lang-btn" title="Switch Language">
    <img src="../assets/images/translate.svg" alt="Translate" style="height: 1.2rem; width: auto;">
</button>

<section class="hero is-light">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">
             <span lang="en">Reproduction Guide</span><span lang="zh">å¤ç°æŒ‡å—</span>
          </h1>
          <p class="subtitle is-4">
            <span lang="en">GDKVM: Echocardiography Video Segmentation via Spatiotemporal Key-Value Memory with Gated Delta Rule</span>
            <span lang="zh">GDKVMï¼šå«é—¨æ§ Delta è§„åˆ™çš„æ—¶ç©ºé”®å€¼è®°å¿†çš„è¶…å£°å¿ƒåŠ¨å›¾è§†é¢‘åˆ†å‰²</span>
          </p>
          
          <div style="margin-top: 1.5rem;">
            <a href="../index.html" class="button is-dark is-rounded">
              <span class="icon"><i class="fas fa-arrow-left"></i></span>
              <span lang="en">Back to Home</span><span lang="zh">è¿”å›ä¸»é¡µ</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop content fade-in">
    
    <!-- ==================== 1. Environment Setup ==================== -->
    <h2 class="section-title" id="environment">
        <span lang="zh">1. ç¯å¢ƒæ„å»º</span><span lang="en">1. Environment Setup</span>
    </h2>
    
    <h3 class="subsection-title">
        <span lang="zh">0. æ¸…ç†ç¯å¢ƒ</span><span lang="en">0. Clean Environment</span>
    </h3>
    <p>
      <span lang="zh">è‹¥å½“å‰ Shell å·²æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå·¦ä¾§æ˜¾ç¤º <code>(base)</code> æˆ– <code>(env)</code>ï¼‰ï¼Œéœ€å…ˆé€€å‡ºã€‚</span>
      <span lang="en">If a virtual environment is currently activated in your Shell (indicated by <code>(base)</code> or <code>(env)</code> on the left), please deactivate it first.</span>
    </p>

    <p>
        <span lang="zh">å¯¹äº Conda ç¯å¢ƒï¼š</span><span lang="en">For Conda environments:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">conda deactivate</code></pre>
    </div>

    <p>
        <span lang="zh">å¯¹äºæ™®é€š venvï¼š</span><span lang="en">For standard venv:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">deactivate</code></pre>
    </div>

    <p class="is-size-7 has-text-grey" style="margin-top: 0.5rem;">
      <span lang="zh">å¤‡æ³¨ï¼š uv çš„ç¯å¢ƒç®¡ç†å…·æœ‰è¾ƒé«˜çš„éš”ç¦»æ€§ã€‚åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œå³ä¾¿æœªé€€å‡º Conda ç¯å¢ƒï¼Œç›´æ¥æ„å»º uv è™šæ‹Ÿç¯å¢ƒä¹Ÿä¸ä¼šå¼•å‘ä¾èµ–å†²çªã€‚</span>
      <span lang="en">Note: uv's environment management features high isolation. In most scenarios, even without deactivating the Conda environment, directly creating a uv virtual environment will not cause dependency conflicts.</span>
    </p>

    <h3 class="subsection-title">
        <span lang="zh">1. å·¥å…·å‡†å¤‡ï¼šå®‰è£… uv</span><span lang="en">1. Preparation: Install uv</span>
    </h3>
    <p>
      <span lang="zh">æœ¬é¡¹ç›®é‡‡ç”¨ <a href="https://uv.doczh.com/" target="_blank">uv</a> è¿›è¡Œä¾èµ–ç®¡ç†ã€‚è¯¥å·¥å…·åŸºäº Rust å¼€å‘ï¼Œå…·å¤‡é«˜æ•ˆçš„ä¾èµ–è§£æèƒ½åŠ›ã€‚</span>
      <span lang="en">This project uses <a href="https://uv.doczh.com/" target="_blank">uv</a> for dependency management. Developed in Rust, it features highly efficient dependency resolution capabilities.</span>
    </p>

    <p>
        <span lang="zh">æœåŠ¡å™¨æ— æ³•ç›´æ¥é“¾æ¥å¤–ç½‘æ—¶ï¼Œå®‰è£…ï¼š</span><span lang="en">Installation without direct internet access:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">pip install uv</code></pre>
    </div>
    
    <p>
        <span lang="zh">æˆ–æ›´æ–°è‡³æœ€æ–°ç‰ˆï¼š</span><span lang="en">Or update to the latest version:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">pip install --upgrade uv</code></pre>
    </div>

    <p>
        <span lang="zh">éªŒè¯å®‰è£…ï¼š</span><span lang="en">Verify installation:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">uv -V</code></pre>
    </div>
    <p class="is-size-7 has-text-grey">
        <span lang="zh">åŸºå‡†ç‰ˆæœ¬ï¼šä»Šå¤©çš„ç‰ˆæœ¬ 0.9.10ã€‚</span>
        <span lang="en">Baseline version: Today's version 0.9.10.</span>
    </p>

    <h3 class="subsection-title">
        <span lang="zh">2. è·å–é¡¹ç›®ä»£ç </span><span lang="en">2. Get Project Code</span>
    </h3>
    <p>
        <span lang="zh">å…‹éš†ä»£ç ä»“åº“å¹¶æŒ‡å®šæœ¬åœ°ç›®å½•åã€‚</span>
        <span lang="en">Clone the repository and specify the local directory name.</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">git clone https://github.com/wangrui2025/GDKVM.git gdkvm_20251215</code></pre>
    </div>

    <p>
        <span lang="zh">è¿›å…¥é¡¹ç›®ç›®å½•ï¼š</span><span lang="en">Enter the project directory:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">cd gdkvm_20251215</code></pre>
    </div>
    
    <p>
        <span lang="zh">é¡¹ç›®ç»“æ„æ¦‚è§ˆï¼š</span><span lang="en">Project structure overview:</span>
    </p>
    <div class="code-container">
      <pre lang="en"><code class="language-bash">.
â”œâ”€â”€ .python-version    # Specifies the Python version
â”œâ”€â”€ pyproject.toml     # Main project configuration file
â”œâ”€â”€ uv.lock            # Lock file (Ensures consistency)
â””â”€â”€ ...                # Other source code files</code></pre>
      <pre lang="zh"><code class="language-bash">.
â”œâ”€â”€ .python-version    # æŒ‡å®šé¡¹ç›®ä½¿ç”¨çš„ Python ç‰ˆæœ¬
â”œâ”€â”€ pyproject.toml     # é¡¹ç›®çš„ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ uv.lock            # é”å®šæ–‡ä»¶ (ç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§)
â””â”€â”€ ...                # å…¶ä»–é¡¹ç›®æºä»£ç æ–‡ä»¶</code></pre>
    </div>

    <h3 class="subsection-title">
        <span lang="zh">3. ç¯å¢ƒåˆå§‹åŒ–ä¸åŒæ­¥</span><span lang="en">3. Initialization & Sync</span>
    </h3>
    <p>
        <span lang="zh">uv å°†è¯»å–é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå®‰è£…æ‰€æœ‰ä¾èµ–ã€‚</span>
        <span lang="en">uv will read configuration files, create a virtual environment, and install all dependencies.</span>
    </p>
    <p class="is-size-7 has-text-grey" style="margin-top: 0.5rem;">
      <span lang="zh">å¯¹äºæ›´æ–°çš„ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ <code>env_02</code> ç¯å¢ƒé…ç½®ï¼Œå…·ä½“ä»£ç å‚è€ƒ <code>env/env_02/pyproject.toml</code></span>
      <span lang="en">For a newer environment, you can use the <code>env_02</code> configuration. Refer to <code>env/env_02/pyproject.toml</code>.</span>
    </p>

    <details class="compatibility-box">
      <summary class="compatibility-header">
        <span><i class="fas fa-search"></i> <span lang="zh">ç¯å¢ƒè‡ªæ£€</span><span lang="en">Environment Self-Check</span></span>
        <span class="icon faq-toggle-icon"><i class="fas fa-chevron-down"></i></span>
      </summary>
      <div class="compatibility-content">
        <div class="code-container">
          <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
          <pre><code class="language-bash">( printf "\n==========================================\nğŸ” 1. GPU Drivers (Hardware Foundation)\n"; nvidia-smi --query-gpu=driver_version --format=csv,noheader 2>/dev/null | awk '{print "Driver: " $1}' || echo "Driver: Unknown"; nvidia-smi 2>/dev/null | grep "CUDA Version" | awk '{print "Max CUDA: " $9}' || echo "Max CUDA: Unknown"; printf "\n==========================================\nğŸ§ 2. OS & GLIBC\n"; [ -f /etc/os-release ] && . /etc/os-release && echo "OS: ${PRETTY_NAME}"; ldd --version | head -n 1; printf "\n==========================================\nğŸ—ï¸  3. Compiler (JIT Critical)\n"; printf "GCC: "; gcc --version 2>/dev/null | head -n 1 || echo "Not found"; printf "\n==========================================\nğŸ› ï¸  4. CUDA Toolkit\n"; if command -v nvcc >/dev/null 2>&1; then nvcc -V | grep release; else echo "âš ï¸ nvcc not found"; fi; printf -- "------------------------------------------\nCUDA Physical Directories (/usr/local):\n"; ls -l /usr/local 2>/dev/null | grep cuda; printf -- "------------------------------------------\nLD_LIBRARY_PATH (Runtime Libs):\n${LD_LIBRARY_PATH:-âš ï¸ Not set}\n"; printf "\n==========================================\nğŸ 5. Python Environment\n"; printf "Python: "; python3 --version 2>&1 || echo "Not found"; printf "Path:   "; command -v python3 || echo "Not found"; printf "==========================================\n" )</code></pre>
        </div>
        
        <div class="box is-size-7" style="font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace; overflow-x: auto; margin-bottom: 0; background-color: #fafafa; border: 1px solid #dbdbdb; color: #4a4a4a; box-shadow: none;">
          <p style="color: #3273dc; font-weight: bold; margin-bottom: 0.5rem; background-color: #eff5fb; padding: 0.2rem 0.5rem; display: inline-block; border-radius: 4px;">env_01 <span lang="zh">ï¼ˆå…¼å®¹æ€§è¾ƒå¥½çš„ç¯å¢ƒï¼‰</span><span lang="en">(Stable Environment)</span></p>
          <div style="padding-left: 0.5rem;">
            ==========================================<br>
            ğŸ” 1. GPU Drivers (Hardware Foundation)<br>
            Driver: 525.85.05<br>
            Driver: 525.85.05<br>
            Driver: 525.85.05<br>
            Driver: 525.85.05<br>
            Driver: 525.85.05<br>
            Driver: 525.85.05<br>
            Driver: 525.85.05<br>
            Driver: 525.85.05<br>
            Max CUDA: 12.0<br>
            <br>
            ==========================================<br>
            ğŸ§ 2. OS & GLIBC<br>
            OS: Ubuntu 18.04.6 LTS<br>
            ldd (Ubuntu GLIBC 2.27-3ubuntu1.6) 2.27<br>
            <br>
            ==========================================<br>
            ğŸ—ï¸  3. Compiler (JIT Critical)<br>
            GCC: gcc (GCC) 7.4.0<br>
            <br>
            ==========================================<br>
            ğŸ› ï¸  4. CUDA Toolkit<br>
            Cuda compilation tools, release 11.8, V11.8.89<br>
            ------------------------------------------<br>
            CUDA Physical Directories (/usr/local):<br>
            lrwxrwxrwx  1 root root    20 11æœˆ 21  2022 cuda -> /usr/local/cuda-10.0<br>
            drwxr-xr-x 17 root root  4096 11æœˆ  9  2022 cuda-10.1<br>
            drwxr-xr-x 18 root root  4096 7æœˆ  18  2022 cuda-10.2<br>
            drwxr-xr-x 17 root root  4096 4æœˆ  19  2024 cuda-11.8<br>
            drwxr-xr-x 17 root root  4096 7æœˆ   9  2022 cuda-8.0<br>
            drwxr-xr-x 18 root root  4096 7æœˆ  18  2022 cuda-9.0<br>
            ------------------------------------------<br>
            LD_LIBRARY_PATH (Runtime Libs):<br>
            /usr/local/cuda-11.8/lib64:<br>
            <br>
            ==========================================<br>
            ğŸ 5. Python Environment<br>
            Python: Python 3.12.12<br>
            Path:   /data/Anon/Repo/gdkvm-20251216/.venv/bin/python3<br>
            ==========================================<br>
          </div>
          <hr style="border-top: 1px dashed #ccc; margin: 1.5rem 0;">
          <p style="color: #3273dc; font-weight: bold; margin-bottom: 0.5rem; background-color: #eff5fb; padding: 0.2rem 0.5rem; display: inline-block; border-radius: 4px;">env_02 <span lang="zh">ï¼ˆè¾ƒæ–°çš„ç¯å¢ƒï¼‰</span><span lang="en">(Newer Environment)</span></p>
          <div style="padding-left: 0.5rem;">
            ==========================================<br>
            ğŸ” 1. GPU Drivers (Hardware Foundation)<br>
            Driver: 570.133.07<br>
            Driver: 570.133.07<br>
            Driver: 570.133.07<br>
            Driver: 570.133.07<br>
            Max CUDA: 12.8<br>
            <br>
            ==========================================<br>
            ğŸ§ 2. OS & GLIBC<br>
            OS: Ubuntu 20.04.6 LTS<br>
            ldd (Ubuntu GLIBC 2.31-0ubuntu9.16) 2.31<br>
            <br>
            ==========================================<br>
            ğŸ—ï¸  3. Compiler (JIT Critical)<br>
            GCC: gcc (Ubuntu 9.4.0-1ubuntu1~20.04.2) 9.4.0<br>
            <br>
            ==========================================<br>
            ğŸ› ï¸  4. CUDA Toolkit<br>
            Cuda compilation tools, release 11.8, V11.8.89<br>
            ------------------------------------------<br>
            CUDA Physical Directories (/usr/local):<br>
            lrwxrwxrwx  1 root root   21 4æœˆ   4  2023 cuda -> /usr/local/cuda-11.7/<br>
            drwxr-xr-x 19 root root 4096 9æœˆ   8  2022 cuda-10.0<br>
            drwxr-xr-x 18 root root 4096 10æœˆ 31  2022 cuda-10.1<br>
            drwxr-xr-x 15 root root 4096 9æœˆ   8  2022 cuda-11.3<br>
            drwxr-xr-x 16 root root 4096 9æœˆ  21  2021 cuda-11.4<br>
            drwxr-xr-x 16 root root 4096 4æœˆ   4  2023 cuda-11.7<br>
            drwxr-xr-x 17 root root 4096 4æœˆ  22  2024 cuda-11.8<br>
            drwxr-xr-x 17 root root 4096 12æœˆ  1 15:59 cuda-12.6<br>
            ------------------------------------------<br>
            LD_LIBRARY_PATH (Runtime Libs):<br>
            /usr/local/cuda-11.8/lib64:<br>
            <br>
            ==========================================<br>
            ğŸ 5. Python Environment<br>
            Python: Python 3.13.7<br>
            Path:   /data/Anon/Repo/gdkvm-rtx6/.venv/bin/python3<br>
            ==========================================
          </div>
        </div>
      </div>
    </details>
    
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">uv sync</code></pre>
    </div>

    <div class="advanced-box">
      <div class="advanced-title">
        <i class="fas fa-tools"></i> 
        <span lang="zh">æ•…éšœæ’é™¤ï¼šå†…ç½‘/å—é™ç½‘ç»œä¸‹çš„ Python å®‰è£…</span>
        <span lang="en">Troubleshooting: Python Installation in Intranet</span>
      </div>
      <p>
        <span lang="zh"><strong>åœºæ™¯ï¼š</strong> è‹¥æ‰§è¡Œ <code>uv sync</code> æ—¶æŠ¥é”™ï¼ˆå¦‚ SSL é”™è¯¯ã€è¿æ¥è¶…æ—¶ï¼‰ï¼Œé€šå¸¸ç³»ç½‘ç»œç­–ç•¥é™åˆ¶å¯¼è‡´ uv æ— æ³•è‡ªåŠ¨ä¸‹è½½ Python è§£é‡Šå™¨ã€‚</span>
        <span lang="en"><strong>Scenario:</strong> If <code>uv sync</code> fails (e.g., SSL errors, timeouts), it is usually due to network policies preventing uv from automatically downloading the Python interpreter.</span>
      </p>
      
      <p>
        <span lang="zh"><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> é€šè¿‡é•œåƒæºæ‰‹åŠ¨å®‰è£… Pythonã€‚</span>
        <span lang="en"><strong>Solution:</strong> Manually install Python via a mirror source.</span>
      </p>
      
      <p style="margin-top: 0.8rem;">
          <span lang="zh">æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬ï¼š</span><span lang="en">Check available versions:</span>
      </p>
      <div class="code-container">
        <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
        <pre><code class="language-bash">uv python list</code></pre>
      </div>

      <p>
          <span lang="zh">é€šè¿‡é•œåƒæºå®‰è£…ï¼ˆä»¥ 3.12.12 ä¸ºä¾‹ï¼‰ï¼š</span><span lang="en">Install via mirror (e.g., 3.12.12):</span>
      </p>
      <div class="code-container">
        <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
        <pre><code class="language-bash">uv python install 3.12.12 --mirror https://github-proxy.lixxing.top/https://github.com/astral-sh/python-build-standalone/releases/download</code></pre>
      </div>
      <p>
          <span lang="zh">å®‰è£…æˆåŠŸåï¼Œå†æ¬¡è¿è¡Œ <code>uv sync</code> ã€‚</span><span lang="en">After successful installation, run <code>uv sync</code> again.</span>
      </p>
    </div>

    <details class="compatibility-box">
      <summary class="compatibility-header">
        <span><i class="fas fa-exclamation-triangle"></i> <span lang="zh">ç‰ˆæœ¬çº¦æŸä¸å…¼å®¹æ€§è¯´æ˜</span><span lang="en">Version Constraints & Compatibility</span></span>
        <span class="icon faq-toggle-icon"><i class="fas fa-chevron-down"></i></span>
      </summary>
      <div class="compatibility-content content">
        <ol style="margin-top: 0; padding-left: 1.2rem;">
          <li style="margin-bottom: 1.5rem;">
            <strong><span lang="zh">Pydantic ç‰ˆæœ¬å†²çª</span><span lang="en">Pydantic Version Conflict</span> <code>&lt;2.12</code></strong>
            <div class="is-size-7" style="margin-top: 0.3rem; padding-left: 0.2rem;">
              <p style="margin-bottom: 0.3rem;">
                  <span lang="zh"><strong><i class="fas fa-bug has-text-danger" style="width: 1.2em;"></i> ç°è±¡ï¼š</strong>Pydantic 2.12+ (2025-10) çš„ä¸¥æ ¼ Schema æ ¡éªŒä¸ wandb å­—æ®µå£°æ˜å†²çªï¼Œå¤šè¿›ç¨‹ä¸‹å¯èƒ½å¯¼è‡´å´©æºƒã€‚</span>
                  <span lang="en"><strong>Issue:</strong> Pydantic 2.12+ (2025-10) strict Schema validation conflicts with wandb field declarations, potentially causing crashes in multi-process modes.</span>
              </p>
              <p style="margin-bottom: 0;">
                  <span lang="zh"><strong><i class="fas fa-check-circle has-text-success" style="width: 1.2em;"></i> è§£å†³ï¼š</strong>é…ç½®æ–‡ä»¶å·²å¼ºåˆ¶é”å®š <code>pydantic&lt;2.12</code>ã€‚</span>
                  <span lang="en"><strong>Solution:</strong> The configuration file forcefully locks <code>pydantic&lt;2.12</code>.</span>
              </p>
            </div>
          </li>
          <li style="margin-bottom: 1.5rem;">
            <strong><span lang="zh">Wandb ç³»ç»Ÿå…¼å®¹æ€§ (glibc)</span><span lang="en">Wandb System Compatibility (glibc)</span></strong>
            <div class="is-size-7" style="margin-top: 0.3rem; padding-left: 0.2rem;">
              <p style="margin-bottom: 0.3rem;">
                  <span lang="zh"><strong><i class="fas fa-bug has-text-danger" style="width: 1.2em;"></i> ç°è±¡ï¼š</strong><code>wandb&gt;=0.22.2</code> åœæ­¢æä¾›é’ˆå¯¹ Ubuntu 18.04 (glibc 2.27) çš„é¢„ç¼–è¯‘åŒ…ï¼Œå¯¼è‡´å®‰è£…å¤±è´¥ã€‚</span>
                  <span lang="en"><strong>Issue:</strong> <code>wandb&gt;=0.22.2</code> stopped providing pre-built packages for Ubuntu 18.04 (glibc 2.27), causing installation failures.</span>
              </p>
              <p style="margin-bottom: 0;">
                  <span lang="zh"><strong><i class="fas fa-check-circle has-text-success" style="width: 1.2em;"></i> è§£å†³ï¼š</strong>éœ€ç¡®ä¿ç³»ç»Ÿå®‰è£…äº† Go ç¼–è¯‘å™¨ä»¥æ”¯æŒæºç ç¼–è¯‘ï¼Œæˆ–å‡çº§æ“ä½œç³»ç»Ÿã€‚</span>
                  <span lang="en"><strong>Solution:</strong> Ensure a Go compiler is installed for source compilation, or upgrade the OS.</span>
              </p>
            </div>
          </li>
          <li>
            <strong><span lang="zh">SSL/TLS è¯ä¹¦é”™è¯¯ (å†…ç½‘/ä»£ç†ç¯å¢ƒ)</span><span lang="en">SSL/TLS Certificate Errors</span></strong>
            <div class="is-size-7" style="margin-top: 0.3rem; padding-left: 0.2rem;">
              <p style="margin-bottom: 0.3rem;">
                  <span lang="zh"><strong><i class="fas fa-bug has-text-danger" style="width: 1.2em;"></i> ç°è±¡ï¼š</strong>è¿è¡Œ <code>uv add/sync</code> æ—¶æŠ¥é”™ï¼ˆCertificate Expiredï¼‰ï¼Œå› å†…ç½‘é˜²ç«å¢™/ä»£ç†çš„è‡ªç­¾åè¯ä¹¦ä¸è¢« uv é»˜è®¤çš„ Rust TLS ä¿¡ä»»ã€‚</span>
                  <span lang="en"><strong>Issue:</strong> <code>uv add/sync</code> fails (Certificate Expired) because self-signed certificates in intranet/proxy environments are not trusted by uv's default Rust TLS.</span>
              </p>
              <p style="margin-bottom: 0.5rem;">
                  <span lang="zh"><strong><i class="fas fa-check-circle has-text-success" style="width: 1.2em;"></i> è§£å†³æ–¹æ¡ˆï¼š</strong>åˆ‡æ¢ä¸ºç³»ç»ŸåŸç”Ÿ TLS éªŒè¯ã€‚</span>
                  <span lang="en"><strong>Solution:</strong> Switch to system-native TLS validation.</span>
              </p>
              
              <div style="margin-bottom: 0.8rem;">
                <span class="tag is-warning is-light" style="height: 1.6em; margin-bottom: 0.2rem;">
                  <span lang="zh">æ–¹æ¡ˆ A (ä¸´æ—¶å•æ¬¡)</span><span lang="en">Option A (Temporary)</span>
                </span>
                <div class="code-container" style="margin-bottom: 0;">
                    <button class="button is-small is-light copy-btn" onclick="copyCode(this)" style="top: 2px; right: 2px; height: 24px; font-size: 0.7rem;"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
                    <pre style="padding: 0.6rem;"><code class="language-bash">uv add wandb --native-tls</code></pre>
                </div>
              </div>

              <div>
                <span class="tag is-success is-light" style="height: 1.6em; margin-bottom: 0.2rem;">
                  <span lang="zh">æ–¹æ¡ˆ B (æ°¸ä¹…æ¨è)</span><span lang="en">Option B (Recommended)</span>
                </span>
                <div class="code-container" style="margin-bottom: 0;">
                    <button class="button is-small is-light copy-btn" onclick="copyCode(this)" style="top: 2px; right: 2px; height: 24px; font-size: 0.7rem;"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
                    <pre style="padding: 0.6rem;"><code class="language-bash">export UV_NATIVE_TLS=1</code></pre>
                </div>
                <p class="help has-text-grey" style="margin-top: 0.2rem;">
                  <span lang="zh">* å»ºè®®å°†æ­¤å‘½ä»¤æ·»åŠ åˆ° <code>~/.bashrc</code> æˆ– <code>~/.zshrc</code></span>
                  <span lang="en">* Recommended to add this to <code>~/.bashrc</code> or <code>~/.zshrc</code></span>
                </p>
              </div>
            </div>
          </li>
        </ol>
      </div>
    </details>

    <h3 class="subsection-title">
        <span lang="zh">4. æ¿€æ´»ç¯å¢ƒ</span><span lang="en">4. Activate Environment</span>
    </h3>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">source .venv/bin/activate</code></pre>
    </div>
    
    <p class="is-size-7 has-text-grey" style="margin-top: 0.5rem;">
      <span lang="zh">æ³¨ï¼šæ¨èæ˜¾å¼æ¿€æ´»ç¯å¢ƒï¼Œä»¥ä¾¿è¿›å…¥äº¤äº’å¼è°ƒè¯•ï¼ˆå¦‚ Python REPLï¼‰åŠä½¿ç”¨ pip æ£€æŸ¥åŒ…çŠ¶æ€ã€‚</span>
      <span lang="en">Note: Explicit activation is recommended to enable interactive debugging (e.g., Python REPL) and checking package status via pip.</span>
    </p>
    
    <p style="margin-top: 1rem;">
        <span lang="zh">éªŒè¯ç¯å¢ƒï¼ˆåº”è¾“å‡ºé¡¹ç›® <code>.venv</code> ç›®å½•ä¸‹çš„è·¯å¾„ï¼‰ï¼š</span><span lang="en">Verify environment (should output the path inside project <code>.venv</code>):</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">which python</code></pre>
    </div>
    <p class="is-size-7 has-text-grey" style="margin-top: 0.5rem;">
      <span lang="zh">è¾“å‡ºç»“æœç¤ºä¾‹ï¼š<br><code>/data/Anon/Repo/gdkvm_20251215/.venv/bin/python</code></span>
      <span lang="en">Example Output:<br><code>/data/Anon/Repo/gdkvm_20251215/.venv/bin/python</code></span>
    </p>

    <!-- ==================== 2. Data Preparation ==================== -->
    <h2 class="section-title" id="data">
        <span lang="zh">2. æ•°æ®å‡†å¤‡</span><span lang="en">2. Data Preparation</span>
    </h2>
    <p>
        <span lang="zh">æˆ‘ä»¬ä½¿ç”¨ <strong>CAMUS</strong> å’Œ <strong>EchoNet-Dynamic</strong> æ•°æ®é›†ã€‚</span>
        <span lang="en">We utilize the <strong>CAMUS</strong> and <strong>EchoNet-Dynamic</strong> datasets.</span>
    </p>

    <h3 class="subsection-title">
        <span lang="zh">æ•°æ®é›†ä¸‹è½½</span><span lang="en">Dataset Download</span>
    </h3>
    
    <div class="compact-card">
      <div style="margin-bottom: 0.8rem; display: flex; flex-wrap: wrap; align-items: center; line-height: 1.8;">
        <span style="font-weight: 700; color: #205cbe; margin-right: 0.8rem;">
            <i class="fas fa-database"></i> <span lang="zh">å·²å¤„ç†æ•°æ®é›†</span><span lang="en">Processed Data</span>:
        </span>
        
        <span style="margin-right: 1.2rem; white-space: nowrap;">
          <strong style="font-weight: 600; color: #4a4a4a;">CAMUS</strong>
          <a href="https://huggingface.co/datasets/miyuki17/camus_png256x256_10f_20250709" target="_blank" class="link-tag">
            ğŸ¤— HuggingFace <i class="fas fa-external-link-alt"></i>
          </a>
        </span>
        
        <span style="white-space: nowrap;">
          <strong style="font-weight: 600; color: #4a4a4a;">EchoNet-Dynamic</strong>
          <a href="https://huggingface.co/datasets/miyuki17/EchoNet-Dynamic" target="_blank" class="link-tag">
            todo
          </a>
        </span>
      </div>

      <div style="padding-top: 0.8rem; border-top: 1px dashed #eee; color: #999; font-size: 0.85rem; line-height: 1.6; display: flex; flex-wrap: wrap; align-items: center;">
        <span style="font-weight: 700; margin-right: 0.8rem;">
            <i class="fas fa-archive"></i> <span lang="zh">åŸå§‹æ•°æ®é›†</span><span lang="en">Raw Data</span>:
        </span>
        
        <span style="margin-right: 1.2rem; white-space: nowrap;">
          <strong style="font-weight: 600; color: #999;">CAMUS</strong> 
          <a href="https://www.creatis.insa-lyon.fr/Challenge/camus/" target="_blank" class="link-subtle">
            <span lang="zh">å®˜æ–¹ç½‘ç«™</span><span lang="en">Official</span>
          </a>
          <a href="https://huggingface.co/datasets/miyuki17/CAMUS_public" target="_blank" class="link-subtle">
            ğŸ¤— <span lang="en">Mirror</span><span lang="zh">é•œåƒ</span>
          </a>
        </span>
        
        <span style="white-space: nowrap;">
          <strong style="font-weight: 600; color: #999;">EchoNet-Dynamic</strong>
          <a href="https://echonet.github.io/dynamic/" target="_blank" class="link-subtle">
            <span lang="zh">å®˜æ–¹ç½‘ç«™</span><span lang="en">Official</span>
          </a>
          <a href="https://huggingface.co/datasets/miyuki17/EchoNet-Dynamic-zip" target="_blank" class="link-subtle">
            ğŸ¤— <span lang="zh">é•œåƒ</span><span lang="en">Mirror</span>
          </a>
        </span>
      </div>
    </div>

    <!-- ==================== 3. Training & Evaluation ==================== -->
    <h2 class="section-title" id="training">
        <span lang="zh">3. æ¨¡å‹è®­ç»ƒä¸è¯„ä¼°</span><span lang="en">3. Training & Evaluation</span>
    </h2>

    <h3 class="subsection-title">
        <span lang="zh">3.1 æ¨¡å‹è®­ç»ƒ</span><span lang="en">3.1 Model Training</span>
    </h3>
    
    <p><strong><span lang="zh">1. ç¯å¢ƒé…ç½®</span><span lang="en">1. Configuration</span></strong></p>
    <p>
        <span lang="zh">æ ¹æ® Shell ç¯å¢ƒï¼ˆ<code>zsh</code> æˆ– <code>bash</code>ï¼‰é€‰æ‹©ç›¸åº”çš„ <code>train.sh</code> è„šæœ¬ï¼Œå¹¶é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ä»¥é€‚é…ç¡¬ä»¶ç¯å¢ƒï¼š</span>
        <span lang="en">Select the appropriate <code>train.sh</code> script based on your Shell environment (<code>zsh</code> or <code>bash</code>), and configure the following environment variables to adapt to your hardware:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre lang="en"><code class="language-bash">CUDA_VISIBLE_DEVICES: 0,1 # Specify GPU device IDs
MASTER_PORT: 29500        # Port for distributed training</code></pre>
      <pre lang="zh"><code class="language-bash">CUDA_VISIBLE_DEVICES: 0,1 # æŒ‡å®šä½¿ç”¨çš„ GPU è®¾å¤‡ç¼–å·
MASTER_PORT: 29500        # åˆ†å¸ƒå¼è®­ç»ƒçš„ä¸»ç«¯å£å·ï¼Œé¿å…å†²çª</code></pre>
    </div>

    <p><strong><span lang="zh">2. å‚æ•°è®¾å®š</span><span lang="en">2. Hyperparameters</span></strong></p>
    <p>
        <span lang="zh">ç¼–è¾‘é…ç½®æ–‡ä»¶ <code>config/config_gdkvm_01.yaml</code>ï¼Œé’ˆå¯¹å®éªŒéœ€æ±‚è°ƒæ•´å…³é”®è¶…å‚æ•°ï¼š</span>
        <span lang="en">Edit <code>config/config_gdkvm_01.yaml</code> to adjust key hyperparameters:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre lang="en"><code class="language-yaml">data_path: /data/Anon/dataset/camus_png256x256_10f_20250709/   # Dataset path
batch_size: 8                                                  # Batch size
learning_rate: 1.0e-4                                          # Learning rate
num_iterations: 3000                                           # Total iterations
eval_stage:
  num_vis: 0                                                   # Visualization count
wandb_mode: "offline"                                          # Set to "offline"</code></pre>
      <pre lang="zh"><code class="language-yaml">data_path: /data/Anon/dataset/camus_png256x256_10f_20250709/   # æ•°æ®é›†çš„å®é™…å­˜æ”¾è·¯å¾„
batch_size: 8                                                  # å•æ¬¡è®­ç»ƒçš„æ ·æœ¬æ•°é‡
learning_rate: 1.0e-4                                          # å­¦ä¹ ç‡
num_iterations: 3000                                           # æ€»è¿­ä»£æ¬¡æ•°
eval_stage:
  num_vis: 0                                                   # å¯è§†åŒ–å›¾ç‰‡çš„æ•°é‡
wandb_mode: "offline"                                          # è®¾ç½®ä¸º "offline"</code></pre>
    </div>

    <p><strong><span lang="zh">3. æ‰§è¡Œè®­ç»ƒ</span><span lang="en">3. Execute Training</span></strong></p>
    <p>
        <span lang="zh">èµ‹äºˆæ‰§è¡Œæƒé™ï¼š</span><span lang="en">Grant execution permission:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">chmod +x ./train.sh</code></pre>
    </div>
    
    <p>
        <span lang="zh">å¯åŠ¨è®­ç»ƒï¼š</span><span lang="en">Start training:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre><code class="language-bash">./train.sh</code></pre>
    </div>

    <h3 class="subsection-title">
        <span lang="zh">3.2 è®­ç»ƒç»“æœè¾“å‡º</span><span lang="en">3.2 Outputs</span>
    </h3>
    <p>
        <span lang="zh">è®­ç»ƒäº§ç‰©ï¼ˆæ¨¡å‹æƒé‡ã€å¯è§†åŒ–ç»“æœç­‰ï¼‰å°†ä¿å­˜è‡³ <code>train.sh</code> ä¸­ <code>hydra.run.dir</code> æŒ‡å®šçš„ç›®å½•ã€‚</span>
        <span lang="en">Artifacts (weights, visualizations) are saved to the directory specified in <code>hydra.run.dir</code>.</span>
    </p>
    <pre><code>gdkvm_20251215/outputs</code></pre>

    <h3 class="subsection-title">3.3 WandB <span lang="zh">ç›‘æ§</span><span lang="en"> Monitoring</span></h3>
    <p>
        <span lang="zh">å®éªŒé‡‡ç”¨ <a href="https://wandb.ai/site" target="_blank">Weights & Biases (WandB)</a> è¿›è¡Œç¦»çº¿æ—¥å¿—è®°å½•ã€‚</span>
        <span lang="en">Experiments use <a href="https://wandb.ai/site" target="_blank">Weights & Biases (WandB)</a> for offline logging.</span>
    </p>
    <ul>
      <li><strong><span lang="zh">æ—¥å¿—è·¯å¾„:</span><span lang="en">Log Path:</span></strong> <code>gdkvm_20251215/wandb</code></li>
      <li><strong><span lang="zh">å…·ä½“è¿è¡Œç›®å½•:</span><span lang="en">Run Directory:</span></strong> <span lang="zh">åŒ…å«æ—¶é—´æˆ³ä¸å“ˆå¸Œå€¼çš„å­æ–‡ä»¶å¤¹ï¼ˆä¾‹å¦‚ï¼š<code>offline-run-20251215_123456-abcdef1gh</code>ï¼‰ã€‚</span><span lang="en">Subfolders with timestamps and hashes (e.g., <code>offline-run-20251215_123456-abcdef1gh</code>).</span></li>
    </ul>

    <p style="margin-top: 1rem;"><strong><span lang="zh">ä¸Šä¼ ç¦»çº¿æ—¥å¿—</span><span lang="en">Upload Offline Logs</span></strong></p>
    <p>
        <span lang="zh">è®­ç»ƒç»“æŸåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†ç¦»çº¿æ•°æ®åŒæ­¥åˆ° WandB äº‘ç«¯ï¼š</span>
        <span lang="en">After training, sync offline data to WandB cloud:</span>
    </p>
    <div class="code-container">
      <button class="button is-small is-light copy-btn" onclick="copyCode(this)"><span class="icon"><i class="fas fa-copy"></i></span><span>Copy</span></button>
      <pre lang="en"><code class="language-bash">wandb sync gdkvm_20251215/wandb/offline-run-20251215_123456-abcdef1gh</code></pre>
      <pre lang="zh"><code class="language-bash">wandb sync gdkvm_20251215/wandb/offline-run-20251215_123456-abcdef1gh</code></pre>
    </div>

  </div>
</section>

<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <p class="is-size-7 has-text-grey">
        <span lang="zh">æœ¬è¯´æ˜çš„æ‰€æœ‰â€œä»Šå¤©â€â€œç°åœ¨â€æŒ‡çš„æ˜¯ 2025 å¹´ 12 æœˆ 15 æ—¥ã€‚</span>
        <span lang="en">All references to "today" or "now" in this guide refer to December 15, 2025.</span>
      </p>
    </div>
  </div>
</footer>

<script>
  // --- Copy Code Function (Robust Version) ---
  function copyCode(btn) {
    const container = btn.closest('.code-container');
    if (!container) return;

    // Find all pre elements in the container
    const pres = container.querySelectorAll('pre');
    let targetPre = pres[0];

    // Identify which pre is currently visible
    // Simple logic based on html class
    if (document.documentElement.classList.contains('lang-en')) {
        const enPre = container.querySelector('pre[lang="en"]');
        if (enPre) targetPre = enPre;
    } else {
        const zhPre = container.querySelector('pre[lang="zh"]');
        if (zhPre) targetPre = zhPre;
    }
    
    // If only one pre exists (shared code), it's already targetPre
    const code = targetPre.querySelector('code');
    const text = code.innerText;

    // Helper to update button UI
    const showSuccess = () => {
        const icon = btn.querySelector('.icon i');
        const textSpan = btn.querySelector('span:last-child');
        const originalText = textSpan.innerText;
        
        icon.className = 'fas fa-check';
        textSpan.innerText = (document.documentElement.className.includes('lang-zh')) ? 'å·²å¤åˆ¶' : 'Copied';
        
        btn.classList.remove('is-light');
        btn.classList.add('is-success');

        setTimeout(() => {
            icon.className = 'fas fa-copy';
            textSpan.innerText = originalText;
            btn.classList.remove('is-success');
            btn.classList.add('is-light');
        }, 2000);
    };

    // Try Clipboard API first
    if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(showSuccess).catch(err => fallbackCopy(text));
    } else {
        fallbackCopy(text);
    }

    function fallbackCopy(text) {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        // Ensure textarea is not visible but part of DOM
        textarea.style.position = 'fixed';
        textarea.style.left = '-9999px';
        textarea.style.top = '0';
        document.body.appendChild(textarea);
        textarea.focus();
        textarea.select();
        try {
            const successful = document.execCommand('copy');
            if (successful) {
                showSuccess();
            } else {
                console.error('Fallback copy failed.');
            }
        } catch (err) {
            console.error('Fallback copy error', err);
        }
        document.body.removeChild(textarea);
    }
  }
  
  // --- Highlight.js Init ---
  document.addEventListener('DOMContentLoaded', (event) => {
    hljs.highlightAll();
  });

  // --- Language Toggle Logic ---
  const langBtn = document.getElementById('lang-toggle');
  const htmlTag = document.documentElement;

  if (langBtn) {
    langBtn.addEventListener('click', () => {
      // Add fade effect
      const elements = document.querySelectorAll('.content, h1, h2, span, p');
      // Remove animation class to restart it
      const contentContainer = document.querySelector('.content');
      contentContainer.classList.remove('fade-in');
      void contentContainer.offsetWidth; // Trigger reflow

      if (htmlTag.classList.contains('lang-en')) {
        htmlTag.classList.replace('lang-en', 'lang-zh');
        try { localStorage.setItem('lang', 'zh'); } catch (e) { console.warn('LocalStorage write failed:', e); }
      } else {
        htmlTag.classList.replace('lang-zh', 'lang-en');
        try { localStorage.setItem('lang', 'en'); } catch (e) { console.warn('LocalStorage write failed:', e); }
      }
      
      // Re-add fade effect
      contentContainer.classList.add('fade-in');
    });
  }
</script>

</body>
</html>
